/**
 * Traductions complètes pour le footer - AJOUT DES NOUVEAUX TEXTES
 */

export const footerTranslations = {
  fr: {
    followUs: "Suivez-nous",
    newsletter: "Newsletter",
    newsletterDesc: "Recevez nos dernières actualités, conseils de rencontre et histoires de succès directement dans votre boîte mail.",
    emailPlaceholder: "Votre adresse email",
    subscribing: "Inscription...",
    subscribe: "S'abonner",
    support: "Support",
    legal: "Légal",
    copyright: "Tous droits réservés.",
    madeWithLove: "Créé avec Amour",
    loadingFooter: "Chargement du footer...",
    newsletterSuccess: "Merci ! Vous êtes maintenant abonné à notre newsletter.",
    newsletterError: "Une erreur s'est produite. Veuillez réessayer.",
    activeNetworks: "réseau actif",
    activeNetworksPlural: "réseaux actifs",
    noActiveNetworks: "Aucun réseau social actif",
    disabled: "désactivé",
    disabledPlural: "désactivés",
    
    // ✅ NOUVEAUX TEXTES À TRADUIRE
    companyDescriptionFallback: "La plateforme de rencontres qui transcende les frontières.",
    companyDescriptionFull: "AMORA révolutionne les rencontres en ligne en plaçant la culture au cœur de l'expérience. Nous croyons que l'amour authentique naît de la compréhension mutuelle et du partage de valeurs communes. Notre vision : créer un monde où chaque personne de nos communautés peut trouver l'âme sœur qui comprend son héritage culturel.",
    
    // Liens Support par défaut (si pas en base)
    supportLinks: {
      support: "Support",
      faq: "FAQ", 
      helpCenter: "Centre d'aide",
      contact: "Contact"
    },
    
    // Liens Legal par défaut (si pas en base)
    legalLinks: {
      legal: "Légal",
      termsOfService: "Conditions d'utilisation",
      privacyPolicy: "Politique de confidentialité", 
      cookiePolicy: "Politique des cookies",
      legalNotice: "Mentions légales"
    }
  },
  
  en: {
    followUs: "Follow Us",
    newsletter: "Newsletter", 
    newsletterDesc: "Receive our latest news, dating tips and success stories directly in your mailbox.",
    emailPlaceholder: "Your email address",
    subscribing: "Subscribing...",
    subscribe: "Subscribe",
    support: "Support",
    legal: "Legal",
    copyright: "All rights reserved.",
    madeWithLove: "Made with Love",
    loadingFooter: "Loading footer...",
    newsletterSuccess: "Thank you! You are now subscribed to our newsletter.",
    newsletterError: "An error occurred. Please try again.",
    activeNetworks: "active network",
    activeNetworksPlural: "active networks", 
    noActiveNetworks: "No active social network",
    disabled: "disabled",
    disabledPlural: "disabled",
    
    companyDescriptionFallback: "The dating platform that transcends borders.",
    companyDescriptionFull: "AMORA revolutionizes online dating by placing culture at the heart of the experience. We believe that authentic love comes from mutual understanding and sharing common values. Our vision: to create a world where every person in our communities can find the soulmate who understands their cultural heritage.",
    
    supportLinks: {
      support: "Support",
      faq: "FAQ",
      helpCenter: "Help Center", 
      contact: "Contact"
    },
    
    legalLinks: {
      legal: "Legal",
      termsOfService: "Terms of Service",
      privacyPolicy: "Privacy Policy",
      cookiePolicy: "Cookie Policy", 
      legalNotice: "Legal Notice"
    }
  },
  
  ht: {
    followUs: "Suiv Nou",
    newsletter: "Nouvèl yo",
    newsletterDesc: "Resevwa dènye nouvèl nou yo, konsèy pou randevou ak istwa siksè yo dirèkteman nan bwat lèt ou.",
    emailPlaceholder: "Adrès imèl ou",
    subscribing: "N ap enskri...",
    subscribe: "Enskri",
    support: "Sipò",
    legal: "Legal",
    copyright: "Tout dwa rezève.",
    madeWithLove: "Fèt ak Lanmou",
    loadingFooter: "N ap chaje footer...",
    newsletterSuccess: "Mèsi! Ou kounye a enskri nan newsletter nou an.",
    newsletterError: "Yon erè rive. Tanpri eseye ankò.",
    activeNetworks: "rezo aktif",
    activeNetworksPlural: "rezo aktif yo",
    noActiveNetworks: "Pa gen rezo sosyal aktif",
    disabled: "dezaktive",
    disabledPlural: "dezaktive",
    
    companyDescriptionFallback: "Platfòm randevou ki depase fwontyè yo.",
    companyDescriptionFull: "AMORA ap revolisyone randevou sou entènèt la nan mete kilti a nan kè eksperyans lan. Nou kwè ke lanmou otantik soti nan konprann mityèl ak pataje valè komen yo. Vizyon nou an: kreye yon mond kote chak moun nan kominote nou yo ka jwenn nanm frè ki konprann eritaj kiltirèl yo.",
    
    supportLinks: {
      support: "Sipò",
      faq: "Kesyon yo",
      helpCenter: "Sant Èd",
      contact: "Kontak"
    },
    
    legalLinks: {
      legal: "Legal",
      termsOfService: "Kondisyon Sèvis yo",
      privacyPolicy: "Politik Konfidansyalite",
      cookiePolicy: "Politik Cookie yo",
      legalNotice: "Avètisman Legal"
    }
  },
  
  es: {
    followUs: "Síguenos",
    newsletter: "Boletín",
    newsletterDesc: "Recibe nuestras últimas noticias, consejos de citas e historias de éxito directamente en tu correo.",
    emailPlaceholder: "Tu dirección de correo",
    subscribing: "Suscribiendo...",
    subscribe: "Suscribirse",
    support: "Soporte",
    legal: "Legal",
    copyright: "Todos los derechos reservados.",
    madeWithLove: "Hecho con Amor",
    loadingFooter: "Cargando pie de página...",
    newsletterSuccess: "¡Gracias! Ahora estás suscrito a nuestro boletín.",
    newsletterError: "Ocurrió un error. Por favor intenta de nuevo.",
    activeNetworks: "red activa",
    activeNetworksPlural: "redes activas",
    noActiveNetworks: "Ninguna red social activa",
    disabled: "deshabilitado",
    disabledPlural: "deshabilitados",
    
    companyDescriptionFallback: "La plataforma de citas que trasciende las fronteras.",
    companyDescriptionFull: "AMORA revoluciona las citas en línea colocando la cultura en el corazón de la experiencia. Creemos que el amor auténtico nace del entendimiento mutuo y el compartir valores comunes. Nuestra visión: crear un mundo donde cada persona de nuestras comunidades pueda encontrar el alma gemela que comprenda su herencia cultural.",
    
    supportLinks: {
      support: "Soporte", 
      faq: "FAQ",
      helpCenter: "Centro de Ayuda",
      contact: "Contacto"
    },
    
    legalLinks: {
      legal: "Legal",
      termsOfService: "Términos de Servicio",
      privacyPolicy: "Política de Privacidad",
      cookiePolicy: "Política de Cookies",
      legalNotice: "Aviso Legal"
    }
  },
  
  pt: {
    followUs: "Siga-nos",
    newsletter: "Newsletter",
    newsletterDesc: "Receba nossas últimas notícias, dicas de encontros e histórias de sucesso diretamente em sua caixa de correio.",
    emailPlaceholder: "Seu endereço de email",
    subscribing: "Inscrevendo...",
    subscribe: "Inscrever-se",
    support: "Suporte", 
    legal: "Legal",
    copyright: "Todos os direitos reservados.",
    madeWithLove: "Feito com Amor",
    loadingFooter: "Carregando rodapé...",
    newsletterSuccess: "Obrigado! Você agora está inscrito em nossa newsletter.",
    newsletterError: "Ocorreu um erro. Tente novamente.",
    activeNetworks: "rede ativa",
    activeNetworksPlural: "redes ativas",
    noActiveNetworks: "Nenhuma rede social ativa",
    disabled: "desabilitado",
    disabledPlural: "desabilitados",
    
    companyDescriptionFallback: "A plataforma de encontros que transcende fronteiras.",
    companyDescriptionFull: "AMORA revoluciona os encontros online colocando a cultura no centro da experiência. Acreditamos que o amor autêntico nasce do entendimento mútuo e do compartilhamento de valores comuns. Nossa visão: criar um mundo onde cada pessoa de nossas comunidades possa encontrar a alma gêmea que compreenda sua herança cultural.",
    
    supportLinks: {
      support: "Suporte",
      faq: "FAQ", 
      helpCenter: "Centro de Ajuda",
      contact: "Contato"
    },
    
    legalLinks: {
      legal: "Legal",
      termsOfService: "Termos de Serviço",
      privacyPolicy: "Política de Privacidade",
      cookiePolicy: "Política de Cookies",
      legalNotice: "Aviso Legal"
    }
  },
  
  // ✅ AJOUT: Support pour 'ptBR'
  ptBR: {
    followUs: "Siga-nos",
    newsletter: "Newsletter",
    newsletterDesc: "Receba nossas últimas notícias, dicas de encontros e histórias de sucesso diretamente em sua caixa de correio.",
    emailPlaceholder: "Seu endereço de email",
    subscribing: "Inscrevendo...",
    subscribe: "Inscrever-se",
    support: "Suporte", 
    legal: "Legal",
    copyright: "Todos os direitos reservados.",
    madeWithLove: "Feito com Amor",
    loadingFooter: "Carregando rodapé...",
    newsletterSuccess: "Obrigado! Você agora está inscrito em nossa newsletter.",
    newsletterError: "Ocorreu um erro. Tente novamente.",
    activeNetworks: "rede ativa",
    activeNetworksPlural: "redes ativas",
    noActiveNetworks: "Nenhuma rede social ativa",
    disabled: "desabilitado",
    disabledPlural: "desabilitados",
    
    companyDescriptionFallback: "A plataforma de encontros que transcende fronteiras.",
    companyDescriptionFull: "AMORA revoluciona os encontros online colocando a cultura no centro da experiência. Acreditamos que o amor autêntico nasce do entendimento mútuo e do compartilhamento de valores comuns. Nossa visão: criar um mundo onde cada pessoa de nossas comunidades possa encontrar a alma gêmea que compreenda sua herança cultural.",
    
    supportLinks: {
      support: "Suporte",
      faq: "FAQ",
      helpCenter: "Centro de Ajuda", 
      contact: "Contato"
    },
    
    legalLinks: {
      legal: "Legal",
      termsOfService: "Termos de Serviço",
      privacyPolicy: "Política de Privacidade",
      cookiePolicy: "Política de Cookies",
      legalNotice: "Aviso Legal"
    }
  }
};

export const translateDatabaseLink = (linkName: string, language: string): string => {
  const t = footerTranslations[language as keyof typeof footerTranslations] || footerTranslations.fr;
  
  // Normaliser le nom du lien (enlever espaces, accents, casse)
  const normalizedName = linkName.toLowerCase()
    .replace(/[àáâãäå]/g, 'a')
    .replace(/[èéêë]/g, 'e')
    .replace(/[ìíîï]/g, 'i')
    .replace(/[òóôõö]/g, 'o')
    .replace(/[ùúûü]/g, 'u')
    .replace(/[ç]/g, 'c')
    .replace(/[ñ]/g, 'n')
    .trim();

  // Mapper avec recherche flexible
  if (normalizedName.includes('support') || normalizedName.includes('aide') || normalizedName.includes('assistance')) {
    return t.supportLinks.support;
  }
  
  if (normalizedName.includes('faq') || normalizedName.includes('question')) {
    return t.supportLinks.faq;
  }
  
  if (normalizedName.includes('help') || normalizedName.includes('centre') || normalizedName.includes('center')) {
    return t.supportLinks.helpCenter;
  }
  
  if (normalizedName.includes('contact')) {
    return t.supportLinks.contact;
  }
  
  if (normalizedName.includes('condition') || normalizedName.includes('terme') || normalizedName.includes('terms')) {
    return t.legalLinks.termsOfService;
  }
  
  if (normalizedName.includes('confidentialite') || normalizedName.includes('privacy') || normalizedName.includes('privacidad')) {
    return t.legalLinks.privacyPolicy;
  }
  
  if (normalizedName.includes('cookie')) {
    return t.legalLinks.cookiePolicy;
  }
  
  if (normalizedName.includes('mention') || normalizedName.includes('legal') || normalizedName.includes('notice')) {
    return t.legalLinks.legalNotice;
  }
  
  // Mapping exact comme avant (pour compatibilité)
  const linkMappings: Record<string, string> = {
    'Support': t.supportLinks.support,
    'FAQ': t.supportLinks.faq,
    'Centre d\'aide': t.supportLinks.helpCenter,
    'Help Center': t.supportLinks.helpCenter,
    'Contact': t.supportLinks.contact,
    'Aide': t.supportLinks.helpCenter,
    'Assistance': t.supportLinks.support,
    'Légal': t.legalLinks.legal,
    'Legal': t.legalLinks.legal,
    'Conditions d\'utilisation': t.legalLinks.termsOfService,
    'Terms of Service': t.legalLinks.termsOfService,
    'Politique de confidentialité': t.legalLinks.privacyPolicy,
    'Privacy Policy': t.legalLinks.privacyPolicy,
    'Politique des cookies': t.legalLinks.cookiePolicy,
    'Cookie Policy': t.legalLinks.cookiePolicy,
    'Mentions légales': t.legalLinks.legalNotice,
    'Legal Notice': t.legalLinks.legalNotice,
    'Termes': t.legalLinks.termsOfService,
    'Confidentialité': t.legalLinks.privacyPolicy,
  };
  
  return linkMappings[linkName] || linkName; // Fallback au nom original si pas trouvé
};

export const translateCompanyDescription = (description: string, language: string): string => {
  const t = footerTranslations[language as keyof typeof footerTranslations] || footerTranslations.fr;
  
  // Si la description correspond au texte français complet, utiliser la traduction
  if (description?.includes('AMORA révolutionne') || description?.includes('révolutionne les rencontres')) {
    return t.companyDescriptionFull;
  }
  
  // Si c'est la description courte
  if (description === 'La plateforme de rencontres qui transcende les frontières.') {
    return t.companyDescriptionFallback;
  }
  
  // Sinon, retourner la description originale (peut-être déjà traduite)
  return description || t.companyDescriptionFallback;
};

export const generateMultilingualUrl = (originalHref: string, language: string): string => {
  // Normaliser le code de langue
  const langCode = language === 'ptBR' ? 'pt' : language;
  
  // Si c'est déjà une URL externe, la retourner telle quelle
  if (originalHref.startsWith('http') || originalHref.startsWith('mailto:')) {
    return originalHref;
  }
  
  // Mapping des URLs vers les slugs multilingues
  const urlMappings: Record<string, string> = {
    '/support': '/help-center', // Support redirige vers help-center
    '/faq': '/faq',
    '/help': '/help-center',
    '/help-center': '/help-center',
    '/contact': '/contact',
    '/terms': '/terms-of-service',
    '/terms-of-service': '/terms-of-service',
    '/privacy': '/privacy-policy',
    '/privacy-policy': '/privacy-policy',
    '/cookies': '/cookies-policy',
    '/cookies-policy': '/cookies-policy',
    '/legal': '/legal-notices',
    '/legal-notices': '/legal-notices',
    '/about': '/about'
  };
  
  // Obtenir le slug correct
  const slug = urlMappings[originalHref] || originalHref;
  
  // Générer l'URL multilingue
  if (langCode === 'fr') {
    return slug; // Français = URL par défaut
  } else {
    return `/${langCode}${slug}`;
  }
};

export const footerLinks = {
  fr: {
    faq: "/faq",
    contact: "/contact", 
    support: "/help-center",
    helpCenter: "/help-center",
    terms: "/terms-of-service",
    privacy: "/privacy-policy",
    cookies: "/cookies-policy",
    legal: "/legal-notices",
    about: "/about"
  },
  en: {
    faq: "/en/faq",
    contact: "/en/contact",
    support: "/en/help-center", 
    helpCenter: "/en/help-center",
    terms: "/en/terms-of-service",
    privacy: "/en/privacy-policy",
    cookies: "/en/cookies-policy",
    legal: "/en/legal-notices",
    about: "/en/about"
  },
  es: {
    faq: "/es/faq",
    contact: "/es/contact",
    support: "/es/help-center",
    helpCenter: "/es/help-center", 
    terms: "/es/terms-of-service",
    privacy: "/es/privacy-policy",
    cookies: "/es/cookies-policy",
    legal: "/es/legal-notices",
    about: "/es/about"
  },
  pt: {
    faq: "/pt/faq",
    contact: "/pt/contact",
    support: "/pt/help-center",
    helpCenter: "/pt/help-center",
    terms: "/pt/terms-of-service", 
    privacy: "/pt/privacy-policy",
    cookies: "/pt/cookies-policy",
    legal: "/pt/legal-notices",
    about: "/pt/about"
  },
  ptBR: {
    faq: "/pt/faq",
    contact: "/pt/contact",
    support: "/pt/help-center",
    helpCenter: "/pt/help-center",
    terms: "/pt/terms-of-service",
    privacy: "/pt/privacy-policy", 
    cookies: "/pt/cookies-policy",
    legal: "/pt/legal-notices",
    about: "/pt/about"
  },
  ht: {
    faq: "/ht/faq",
    contact: "/ht/contact",
    support: "/ht/help-center",
    helpCenter: "/ht/help-center",
    terms: "/ht/terms-of-service",
    privacy: "/ht/privacy-policy",
    cookies: "/ht/cookies-policy", 
    legal: "/ht/legal-notices",
    about: "/ht/about"
  }
};

// Fonction pour obtenir le bon lien selon la langue
export const getFooterLink = (linkType: string, language: string): string => {
  const langCode = language as keyof typeof footerLinks;
  const links = footerLinks[langCode] || footerLinks.fr;
  
  // Mapping des types de liens
  const linkTypeMapping: Record<string, keyof typeof links> = {
    'faq': 'faq',
    'contact': 'contact',
    'support': 'support',
    'help-center': 'helpCenter',
    'help': 'helpCenter',
    'terms-of-service': 'terms',
    'terms': 'terms',
    'privacy-policy': 'privacy',
    'privacy': 'privacy',
    'cookies-policy': 'cookies',
    'cookies': 'cookies',
    'legal-notices': 'legal',
    'legal': 'legal',
    'about': 'about'
  };
  
  const mappedType = linkTypeMapping[linkType] || 'faq';
  return links[mappedType];
};

// Fonction pour détecter le type de lien et générer l'URL
export const detectLinkTypeAndGenerateUrl = (linkName: string, originalHref: string, language: string): string => {
  // Détecter le type de lien basé sur le nom
  const normalizedName = linkName.toLowerCase();
  
  if (normalizedName.includes('faq') || normalizedName.includes('question')) {
    return getFooterLink('faq', language);
  }
  
  if (normalizedName.includes('contact')) {
    return getFooterLink('contact', language);
  }
  
  if (normalizedName.includes('support') || normalizedName.includes('aide') || normalizedName.includes('help')) {
    return getFooterLink('support', language);
  }
  
  if (normalizedName.includes('condition') || normalizedName.includes('terme') || normalizedName.includes('terms')) {
    return getFooterLink('terms', language);
  }
  
  if (normalizedName.includes('confidentialite') || normalizedName.includes('privacy')) {
    return getFooterLink('privacy', language);
  }
  
  if (normalizedName.includes('cookie')) {
    return getFooterLink('cookies', language);
  }
  
  if (normalizedName.includes('mention') || normalizedName.includes('legal') || normalizedName.includes('notice')) {
    return getFooterLink('legal', language);
  }
  
  // Si aucun type détecté, utiliser l'URL originale avec préfixe langue
  return generateMultilingualUrl(originalHref, language);
};